<%- include('../partials/header') -%>
<%- include('../partials/navbar') -%>



<%- include('../partials/messages') -%>





	<div class="showCard showBackground">
			<div class="row">
					<div class="editButtons">
						<a class="btn btn-secondary" href="/recipes">Back</a>
					
					<div class="editButtons">
						<% if (recipe.author === user.name || user.role == "admin") { %>
							<a class="btn btn-warning" href="/recipes/<%= recipe.id %>/edit">Edit</a>
							<% } else { %>
							<% } %>		
					</div>
					<div class="editButtons">
						<%- include('../partials/deleteForm', { url: `/recipes/${recipe._id}` }) -%>
					</div>
				</div>
			</div>
		<div class="showBarCategory"><i><%= recipe.category[0]%></i>
		
		</div>
		<div class="container showIndexCard">
			<div class="row">
				<div class="col padLeftNone"style="margin-bottom: 20px;">
					<h3 class="showRecipeTitle"><%= recipe.recipeName %></h3>
					<h8><i>Author: <%= recipe.author %></i></h8>
				</div>
			</div>
			<div class="row">
				<div class="col-6 padLeftNone">
					<div class="row" style="margin-top: 20px;">
						<div class="col-4 showIconsCol"><img src="/images/recipeIcons/timer-01.png" class="showIcons"></div> 
						<div class="col showTimerServe">Time</div>
						</div>  
		
					<div class="row" style="margin-top: 20px;"> 
							<div class="col-4 showIconsCol"><img src="/images/recipeIcons/serving-01.png" class="showIcons"></div> 
							<div class="col showTimerServe">Servings</div>
					</div>
				</div>
				<div class="col"> 
					<img src="<%= recipe.imageName %>" alt="recipe image" class="showRecipeImg">
				</div> 
			</div>
			<div class="row">
				<div class="col padLeftNone">
					<h5 class="showInstructions">Ingredients</h5>
				</div>
			</div>

				<% for (var i = 0; i < recipe.ingredients.length; i++) { %>
					<% if (recipe.ingredients[i] !== "") {%> 
						<div class="row">
							<div class="col-4 padLeftNone showIngredients"><b><%= recipe.amount[i] %></b></div>
							<div class="col padLeftNone showIngredients"><b><%= recipe.ingredients[i] %></b></div>
						</div>
						<% } else { %> 
							<%  %> 
						<% } %> 
				<% } %>

				<div class="row"></div>

				<div class="row">
					<div class="col padLeftNone">
						<h5 class="showInstructions">Directions</h5>
					</div>
				</div>

				<% for (var i = 0; i < recipe.stepName.length; i++) { %>
					<% if (recipe.stepNameTitle[i] !== "") { %> 
						<div class="row">
							<div class="col-1 padLeftNone showDirectionsNum"><%=i+1%></div>
							<div class="col padLeftNone" id="stepName_<%=i%>" style="padding: 5px 0px 5px 5px; border-top: 0px; border-bottom: 1pt solid seagreen;"><%= recipe.stepName[i] %></div>
						</div>
						<% } else { %>
					<% } %>
				<% } %>
				<div class="row">
					<h5 class="padLeftNone showInstructions">Categories</h5>
					<ul class="padLeftNone">
						<% for (var i = 0; i < recipe.category.length; i++) { %>
						<li style="display: inline-block"><%= recipe.category[i]%>, </li>
						<% } %>
					</ul>
			
						<% if (recipe.allergens.length !== 0) { %>
							<h5 class="padLeftNone showInstructions">Allergens</h5>
							<ul class="padLeftNone">
								<% for (var i = 0; i < recipe.allergens.length; i++) { %>
								<li style="display: inline-block"><%= recipe.allergens[i]%>, </li>
								<% } %>
							</ul>
						<% } else { %> 
							<div>
								<h6><b>Allergens</b></h6>
								<hr style="margin-top: 0px; height:1px;border:none;color:#333;background-color:#333;" >
								<h6>This Recipe has no known Allergens. Consume at your own risk!</h6>
							</div>
							<br>
						<% } %>
	
	
				</div>
		</div>
		
    </div>

	<%- include('../partials/comments') -%>

<%- include('../partials/footer') -%>

